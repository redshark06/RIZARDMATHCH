<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LizardMatch - ìµœì¢… í™•ì¸</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¦ LizardMatch</h1>
            <p class="subtitle">íŒŒì¶©ë¥˜/ì–‘ì„œë¥˜ ì¢… ì¶”ì²œ ì„œë¹„ìŠ¤</p>
        </header>

        <div class="progress-indicator">
            <span class="progress-text">4 / 4</span>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 100%"></div>
            </div>
        </div>

        <main class="survey-container">
            <div class="review-container">
                <h2>ì„¤ë¬¸ ë‚´ìš© í™•ì¸</h2>
                <div id="reviewContent" class="review-content">
                    <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                </div>
            </div>

            <div class="form-actions">
                <button type="button" id="prevBtn" class="btn btn-secondary">ì´ì „</button>
                <button type="button" id="submitBtn" class="btn btn-primary">ì¶”ì²œ ë°›ê¸°</button>
            </div>
        </main>
    </div>

    <script src="app.js"></script>
    <script src="survey_navigation.js"></script>
    <script src="form_utils.js"></script>
    <script>
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ ë°ì´í„° ë³µì› ë° í™•ì¸ ë‚´ìš© í‘œì‹œ
        document.addEventListener('DOMContentLoaded', () => {
            restoreCurrentPageData();
            displayReview();
        });

        // ì´ì „ ë²„íŠ¼
        document.getElementById('prevBtn').addEventListener('click', () => {
            goToPreviousPage();
        });

        // ì œì¶œ ë²„íŠ¼
        document.getElementById('submitBtn').addEventListener('click', () => {
            handleFinalSubmit();
        });

        function displayReview() {
            const allData = collectAllPageData();
            const reviewContent = document.getElementById('reviewContent');
            
            let html = '<div class="review-section">';
            html += '<h3>ì„ íƒí•œ ì¢…ë¥˜</h3>';
            html += '<p>' + (allData.preferences.ì¢…ë¥˜ ? allData.preferences.ì¢…ë¥˜.join(', ') : 'ì—†ìŒ') + '</p>';
            html += '</div>';

            // ê° ì§ˆë¬¸ë³„ë¡œ í™•ì¸ ë‚´ìš© í‘œì‹œ
            const questions = [
                { key: 'ì‚¬ìœ¡_ë‚œì´ë„_5ë‹¨ê³„', label: 'ì‚¬ìœ¡ ë‚œì´ë„' },
                { key: 'ì´ˆê¸°ë¹„ìš©_ë“±ê¸‰_5ë‹¨ê³„_max', label: 'ì´ˆê¸° ë¹„ìš©' },
                { key: 'ì‚¬ìœ¡ì¥_ì‚¬ì´ì¦ˆ_3ë‹¨ê³„_max', label: 'ì‚¬ìœ¡ì¥ í¬ê¸°' },
                { key: 'í™œë™íŒ¨í„´', label: 'í™œë™ íŒ¨í„´' },
                { key: 'ë¨¹ì´ë¹ˆë„_ë“±ê¸‰_prefer', label: 'ë¨¹ì´ ê¸‰ì—¬ ë¶€ë‹´' },
                { key: 'í•¸ë“¤ë§ì í•©ë„_5ë‹¨ê³„_prefer', label: 'í•¸ë“¤ë§ ì í•©ë„' },
                { key: 'ê´€ìƒìš©_ì• ì™„ìš©', label: 'ì‚¬ìœ¡ ëª©ì ' },
                { key: 'ì‹ì„±íƒ€ì…', label: 'ì‹ì„± íƒ€ì…' },
                { key: 'ì™¸í˜•íƒœê·¸', label: 'ì™¸í˜• íƒœê·¸' }
            ];

            questions.forEach(q => {
                const value = allData.preferences[q.key];
                if (value !== undefined && value !== null && value !== '') {
                    html += `<div class="review-section">`;
                    html += `<h3>${q.label}</h3>`;
                    html += `<p>${Array.isArray(value) ? value.join(', ') : value}</p>`;
                    html += `</div>`;
                }
            });

            reviewContent.innerHTML = html;
        }
    </script>
</body>
</html>

